
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>Hacking Seaborn Grid Plots</title>
    <meta name="description" content="">
    <meta name="author" content="Catherine Holloway">

    <!-- Enable responsive viewport -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Bootstrap styles -->
    <link href="http://CatherineH.github.io/assets/themes/bootstrap-3/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <!-- Optional theme -->
    <link href="http://CatherineH.github.io/assets/themes/bootstrap-3/bootstrap/css/bootstrap-theme.min.css" rel="stylesheet">
    <!-- Sticky Footer -->
    <link href="http://CatherineH.github.io/assets/themes/bootstrap-3/bootstrap/css/bs-sticky-footer.css" rel="stylesheet">
    
    <!-- Custom styles -->
    <link href="http://CatherineH.github.io/assets/themes/bootstrap-3/css/style.css?body=1" rel="stylesheet" type="text/css" media="all">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

    <!-- Fav and touch icons -->
    <!-- Update these with your own images
      <link rel="shortcut icon" href="images/favicon.ico">
      <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
      <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
      <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
    -->

    <!-- atom & rss feed -->
    <link href="http://CatherineH.github.io/atom.xml" type="application/atom+xml" rel="alternate" title="Sitewide ATOM Feed">
    <link href="http://CatherineH.github.io/rss.xml" type="application/rss+xml" rel="alternate" title="Sitewide RSS Feed">

  </head>

  <body>
    <div id="wrap">
      <nav class="navbar navbar-default" role="navigation">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#jb-navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/">Catherine's Auxiliary Brain</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="jb-navbar-collapse">
          <ul class="nav navbar-nav">
            
            
            


  
    
      
    
  
    
      
      	
      	<li><a href="http://CatherineH.github.io/archive">Archive</a></li>
      	
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="http://CatherineH.github.io/categories">Categories</a></li>
      	
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="http://CatherineH.github.io/pages">Pages</a></li>
      	
      
    
  
    
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="http://CatherineH.github.io/tags">Tags</a></li>
      	
      
    
  



          </ul>
          <form class="navbar-form navbar-right" role="search">
            <div class="form-group">
              <input type="text" class="form-control" placeholder="Search">
            </div>
            <button type="submit" class="btn btn-default">Submit</button>
          </form>
        </div><!-- /.navbar-collapse -->
      </nav>

      <div class="container">
        
<div class="page-header">
  <h1>Hacking Seaborn Grid Plots </h1>
</div>

<div class="row post-full">
  <div class="col-xs-12">
    <div class="date">
      <span>24 May 2016</span>
    </div>
    <div class="content">
      
<p>Seaborn is a wonderful python package for creating statistical plots like 
those found in R. Although the documentation and API does not expose much, 
the modules are built on top of matplotlib, a versatile plotting library. 
Matplotlib has an incredible amount of customization, if you’re willing to 
dig far enough. My goal with this post is simply to document the 
customizations I have encountered. The changes are made on the ‘iris’ demo.</p>

<h2 id="empty-axes">Empty Axes</h2>

<p>Using seaborn with the default ubuntu matplotlib package (python-matplotlib) 
will result in plots with empty axes:</p>

<p><img src="https://raw.githubusercontent.com/CatherineH/CatherineH.github.io/master/_posts/images/seaborn_plots/empty_axes.png" alt="empty axes example" /></p>

<p>To resolve this, matplotlib must be updated past version 1.3:</p>

<pre><code>$ sudo apt-get install libfreetype6-dev
$ sudo pip install --upgrade matplotlib

</code></pre>

<h2 id="custom-data-labels">Custom Data Labels</h2>

<p>Seaborn will take the keys from the dataframe as the x and y axes labels, and
 assign labels only if the subplots are around the left and bottom sides of 
 the grid. Replacing them means dipping down to the axes level:</p>

<pre><code>import seaborn as sns; sns.set(style="ticks", color_codes=True)
iris = sns.load_dataset("iris")
g = sns.pairplot(iris, hue='species')
replacements = {'sepal_length': r'$\alpha$', 'sepal_width': 'sepal',
                'petal_length': r'$\beta$', 'petal_width': 'petal',
                'versicolor': 'bloop'}

for i in range(4):
    for j in range(4):
        xlabel = g.axes[i][j].get_xlabel()
        ylabel = g.axes[i][j].get_ylabel()
        if xlabel in replacements.keys():
            g.axes[i][j].set_xlabel(replacements[xlabel])
        if ylabel in replacements.keys():
            g.axes[i][j].set_ylabel(replacements[ylabel])
</code></pre>

<p>Similarly, the hue categories are taken from the values in the dataframe. 
Most of the template graphs (such as pairplot), add a legend to the top level
 figure on being called, and this makes it difficult to edit.</p>

<p>In addition, the matplotlib <em>Figure</em> object does not provide a <em>get_legend()</em>
 method. Instead, it is possible to access via <em>get_children()</em>. The legend 
 is the last artist added, so it will be at index -1:</p>

<pre><code>for i in range(len(g.fig.get_children()[-1].texts)):
    label = g.fig.get_children()[-1].texts[i].get_text()
    if label in replacements.keys():
        g.fig.get_children()[-1].texts[i].set_text(replacements[label])
</code></pre>

<p>This is the resulting graph:</p>

<p><img src="https://raw.githubusercontent.com/CatherineH/CatherineH.github.io/master/_posts/images/seaborn_plots/labels_output.png" alt="renaming labels example" /></p>

<h2 id="moving-the-legend">Moving the Legend</h2>

<p>There are plenty of ways to place a legend in a figure when it is created, 
but moving the legend once it is already in the figure is a different story. 
The one method I’ve found is to move the legend’s anchor using 
<em>set_bbox_to_anchor</em>. These numbers seem to be expressed as a function of the
 size of the total figure, and are expressed as (left, bottom, width, height)
 . Since the figure expands to fill the required space of all the artists, 
 width and height can be zero. So, the following code will put the legend in 
 the middle in the y direction but over right edge of the figure:</p>

<pre><code>g.fig.get_children()[-1].set_bbox_to_anchor((1.1, 0.5, 0, 0))
</code></pre>

<p><img src="https://raw.githubusercontent.com/CatherineH/CatherineH.github.io/master/_posts/images/seaborn_plots/legend_moved_output.png" alt="moved legend example" /></p>


    </div>

  
    <ul class="tag_box inline">
      <li><i class="glyphicon glyphicon-open"></i></li>
      
      


  
     
    	<li><a href="http://CatherineH.github.io/categories.html#programming-ref">
    		programming <span>9</span>
    	</a></li>
    
  


    </ul>
    

  
    <ul class="tag_box inline">
      <li><i class="glyphicon glyphicon-tags"></i></li>
      
      


  
     
    	<li><a href="http://CatherineH.github.io/tags.html#python-ref">python <span>6</span></a></li>
     
    	<li><a href="http://CatherineH.github.io/tags.html#matplotlib-ref">matplotlib <span>1</span></a></li>
     
    	<li><a href="http://CatherineH.github.io/tags.html#seaborn-ref">seaborn <span>1</span></a></li>
     
    	<li><a href="http://CatherineH.github.io/tags.html#data visualization-ref">data visualization <span>1</span></a></li>
    
  



    </ul>
    
  
    <hr>
    <ul class="pagination">
    
      <li class="prev"><a href="http://CatherineH.github.io/music/2016/05/20/stuff-i-bought-on-bandcamp-in-may" title="Stuff I bought on Bandcamp in May">&laquo; Previous</a></li>
    
      <li><a href="http://CatherineH.github.io/archive.html">Archive</a></li>
    
      <li class="next"><a href="http://CatherineH.github.io/programming/2016/06/07/mimicking-udev-rules-with-pyserial" title="Mimicking udev rules with PySerial">Next &raquo;</a></li>
    
    </ul>
    <hr>
    


  <div id="disqus_thread"></div>
<script type="text/javascript">
    
    var disqus_developer = 1;
    var disqus_shortname = 'catherineh'; // required: replace example with your forum shortname
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>




  </div>
</div>


      </div>

    </div>

    <div id="footer">
      <div class="container">
        <p>&copy; 2016 Catherine Holloway
          with help from <a href="http://jekyllbootstrap.com" target="_blank" title="The Definitive Jekyll Blogging Framework">Jekyll Bootstrap</a>
          and <a href="http://getbootstrap.com" target="_blank">Bootstrap</a>
        </p>
      </div>
    </div>

    





    <!-- Latest compiled and minified JavaScript, requires jQuery 1.x (2.x not supported in IE8) -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script src="http://CatherineH.github.io/assets/themes/bootstrap-3/bootstrap/js/bootstrap.min.js"></script>
  </body>
</html>

